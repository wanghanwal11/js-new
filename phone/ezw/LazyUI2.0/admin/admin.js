!function(){function d(b){function d(){k({path:a.beforeJs[c],cache:a.debug,onload:function(){c<a.beforeJs.length-1?(c++,d()):b()},onerror:function(){}})}a.css.unshift(a.dir+"/admin/admin.css"),f(a.css,function(b){l({path:b,cache:a.debug})}),a.beforeJs.push(a.dir+"/admin/method.js"),lazy.browserType==a.androidName?a.beforeJs.push(a.dir+"/admin/androidSDK.js"):lazy.browserType==a.androidName&&a.beforeJs.push(a.dir+"/admin/iosSDK.js");var c=0;d()}function e(){function c(){k({path:a.afterJs[b],cache:a.debug,onload:function(){b<a.afterJs.length-1&&(b++,c())},onerror:function(){}})}if(a.afterJs.length>0){var b=0;c()}}function f(a,b){var c,d;if("array"==g)for(c=0;c<a.length;c++)b(a[c],c);else for(d in a)b(a[d],d)}function g(a){return a&&"object"==typeof a&&"number"==typeof a.length&&"function"==typeof a.splice&&!a.propertyIsEnumerable("length")?"array":typeof a}function h(a){var b="";return f(a.split("/"),function(a,c){b+=0==c?a:a.substring(0,1).toUpperCase()+a.substring(1)}),b}function i(b){a.debug!==!1&&console.log(b)}function j(a,b,c){var e,d=document.createElement(a);if(b&&(-1!=b.indexOf("#")?d.id=b.replace("#",""):d.className=b.replace(".","")),"a"==a&&d.setAttribute("href","javascript:;"),c)for(e in c)d.setAttribute(e,c[e]);return d}function k(a){var b=document.createElement("script"),c=document.getElementsByTagName("head")[0];b.src=a.cache?-1!=a.path.indexOf("?")?a.path+"&_version="+(new Date).getTime():a.path+"?_version="+(new Date).getTime():a.path,c.appendChild(b),b.onload=function(){a.onload&&a.onload()},b.onerror=function(){i(a.path+"不存在!"),a.onerror&&a.onerror()}}function l(a){var b=document.getElementsByTagName("head")[0],c=document.createElement("link");c.rel="stylesheet",c.href=a.cache?-1!=a.path.indexOf("?")?a.path+"&_version="+(new Date).getTime():a.path+"?_version="+(new Date).getTime():a.path,b.appendChild(c)}function m(){var f,b=!1,c=document.documentElement,d=a.UI,e=navigator.userAgent.toLowerCase();-1!=e.indexOf(a.androidName)?lazy.browserType=a.androidName:-1!=e.indexOf(a.iosName)?lazy.browserType=a.iosName:"micromessenger"==e.match(/MicroMessenger/i)?lazy.browserType="weixin":e.match(/(iPhone|iPad|iPod|iOS)/i)?lazy.browserType="ios":e.match(/android/i)?lazy.browserType="android":(lazy.browserType="pc",b=!0),b&&d.pc||(f=c.clientWidth,"v"!=d.screen&&(f=c.clientHeight),lazy.fontSize=(d.fontSize||30)*(f/(d.width||720)),c.style.fontSize=lazy.fontSize+"px")}function n(b,c,d){function f(){var a=document.getElementById(e),f=lazy.create("div","#"+e,{type:b["type"]});b.style&&!function(){for(var a in b.style)f.style[a]=b.style[a]}(),b.class&&(f.className=b.class),b.visible===!1?f.style.display="none":b.visible===!0&&(f.style.display="block"),a?(a.parentNode.insertBefore(f,a),a.parentNode.removeChild(a),lazy.plugins[b.type].init(f,b,a.parentNode),c(f)):(d&&d.appendChild(f),lazy.plugins[b.type].init(f,b,d),c(f))}if(b=o(b),b.type){var e=b.id||lazy.getAutoId();lazy.pluginsId[e]=b,lazy.plugins[b.type]?f():(l({path:a.dir+"/plugins/"+b.type+"/"+b.type+".css",cache:a.debug}),k({path:a.dir+"/plugins/"+b.type+"/"+b.type+".js",cache:a.debug,onload:function(){f()}}))}else i("setData:type参数不存在!",a.debug)}function o(a){var b={};return lazy.for(a,function(a,c){var d,e;"function"==typeof a||"class"==c||"id"==c||"type"==c?b[c]=a:(d=c+"_lazy",e=c+"_change",b[d]=a,b.__defineGetter__(c,function(){return this[d]}),b.__defineSetter__(c,function(a){this[d]=a,this[e]&&this[e](a),this["all_change"]&&this["all_change"](a,c)}))}),b}var c,a={dir:"LazyUI2.0",iosName:"vitoios",androidName:"vitoandroid",firstPage:"index",response:{},map:{},beforeJs:[],afterJs:[],css:[],pages:{},thisPagePage:null,beforePage:null,pageInit:{},UI:{width:720,screen:"v",pc:!1,fontSize:30}},b=function(){this.name="LazyUI2.0",this.url="http://192.168.0.42/Route/",this.autoId=0,this.pluginsId=[],this.plugins=[],this.touchObj={}};b.prototype={type:g,"for":f,create:j,loadJs:k,loadCss:l,getAutoId:function(){return"LazyAuto"+this.autoId++},ajax:function(b){var e,f,g,h,c=this,d={url:b.url||"",type:b.type||"GET",dataType:b.dataType||"",error:b.error||function(){},success:b.success||function(){}};"jsonp"==d.dataType?(e=c.getAutoId(),window[e]=function(a){back1&&back1(a)},f=-1==d.url.indexOf("?")?"?":"&",c.loadJs({path:d.url+f+"jsoncallback="+e,cache:a.debug,onload:function(){},onerror:function(){i(d.url+f+"jsoncallback="+e+"不存在!")}})):(xmlhttp=new XMLHttpRequest,"POST"==d.type?(g=d.url.replace(/.*?\?/,""),h=d.url.replace(/\?.*/,""),xmlhttp.open("POST",h,!0),xmlhttp.setRequestHeader("Content-type","application/x-www-form-urlencoded"),xmlhttp.send(g)):(xmlhttp.open("GET",d.url,!0),xmlhttp.send()),xmlhttp.onreadystatechange=function(){4==xmlhttp.readyState&&200==xmlhttp.status?d.success(xmlhttp.responseText):(0==xmlhttp.status||(xmlhttp.status+"").match(/(4|5)\d\d/))&&d.error(xmlhttp.status)})},touchEvent:function(a){var b=this,c=b.getAutoId(),d=a&&a.dom||null;null!=d&&(a={touchstart:a.touchstart||function(){},touchmove:a.touchmove||function(){},touchend:a.touchend||function(){}},b.touchObj[c]={},b.touchObj[c]["touchstart"]=function(b){a.touchstart({event:b,x:b.touches[0].clientX,y:b.touches[0].clientY})},b.touchObj[c]["touchmove"]=function(b){a.touchmove({event:b,x:b.touches[0].clientX,y:b.touches[0].clientY})},b.touchObj[c]["touchend"]=function(b){a.touchend({event:b,x:b.changedTouches[0].clientX,y:b.changedTouches[0].clientY})},d.addEventListener("touchstart",function(a){b.touchObj[c]["touchstart"](a)},!1),d.addEventListener("touchmove",function(a){b.touchObj[c]["touchmove"](a)},!1),d.addEventListener("touchend",function(a){b.touchObj[c]["touchend"](a)},!1))}},c=function(){this.page={},this.debug=!1},c.prototype={init:function(){var a=this;window.addEventListener("load",function(){a.urlChange()}),window.addEventListener("hashchange",function(){a.urlChange()}),window.PAGE_INIT=null},urlChange:function(){var i,c=location.hash.split("?"),d=c[0].split("#")[1],e=c[1]?c[1].split("&"):[],g={};f(e,function(a){var c=a.split("=");g[c[0]]=c[1]}),d?(i=h(d),a.response[i]=g,this.rendererDom({name:i,path:d,query:g,cache:a.map[i]&&a.map[i].cache||!1})):location.hash=a.firstPage},rendererDom:function(b){function e(d){if(a.map[b.name]&&a.map[b.name].before){var e={next:function(){c.rendererJs(b)},clear:function(){},name:b.name,path:b.path,query:b.query};d&&(e.next=function(){},e.clear=function(){c.rendererJs(b)}),a.map[b.name].before(e)}else c.rendererJs(b)}function f(c){if(a.map[b.name]&&void 0!=a.map[b.name].animate)switch(parseInt(a.map[b.name].animate)){case 0:c.className="pageTopToBottom";break;case 1:c.className="pageRightToLeft";break;case 2:c.className="pageBottomToTop";break;case 3:c.className="pageLeftToRight"}}var d,c=this;a.beforePage&&(d=a.beforePage.dom,a.beforePage.cache?d.style.display="none":(d.parentElement.removeChild(d),a.pages[a.beforePage.name]&&delete a.pages[a.beforePage.name])),a.pages[b.name]?(a.beforePage=a.pages[b.name],a.pages[b.name].dom.style.display="block",e(!0)):(b.dom=j("div","#"+b.name,{type:"page"}),f(b.dom),document.body.appendChild(b.dom),a.pages[b.name]=b,a.beforePage=b,e())},rendererJs:function(b){a.pageInit[b.name]?a.pageInit[b.name](b.dom):(k({path:a.dir+"/page/"+b.path+".js",cache:a.debug,onload:function(){a.pageInit[b.name]=PAGE_INIT,a.pageInit[b.name](b.dom),a.map[b.name]&&a.map[b.name].after&&a.map[b.name].after()},onerror:function(){i(a.dir+"/page/"+b.path+".js不存在!")}}),a.map[b.name]&&a.map[b.name].css&&l({path:a.dir+"/page/"+b.path+".css"}))}},window.start=function(g,h){h&&f(h,function(b,c){a[c]=b}),window.lazy=new b,m(),window.router=new c,router.init(),d(function(){g(),e()})},window.setData=function(b,c){var d,e;switch(lazy.type(b)){case"array":if(d=a.beforePage.dom,0==b.length)return c&&c(d,b),void 0;e=0,!function f(){n(b[e],function(){e<b.length-1?(e++,f()):c&&c(d,b)},d)}();break;case"object":n(b,function(a){c&&c(a,b)});break;default:i("setData格式不对!",a.debug)}},window.getData=function(a){return lazy.pluginsId[a]}}();